# 52-01 Plan — Calibration, Repeat-Offender Escalation, and SLA Visibility

## Objective

Finalize v6.0 integrity automation by adding tunable risk thresholds, repeat-offender escalation boosts, expanded abuse signals, and platform queue/SLA monitoring.

## Requirements Coverage IDs

- `INT-15` — Integrity thresholds are configurable without code deployments.
- `INT-16` — Repeat-offender behavior increases effective risk and escalation pressure.
- `INT-17` — Additional loop/collision abuse signals are captured and scored.
- `INT-18` — Platform admins can monitor queue health and SLA breaches.

## Tasks

- [x] **Task 1:** Add calibration configuration + trigger updates
  - Migration `168_marketplace_integrity_calibration.sql`
  - Added singleton integrity config and expanded signal type checks.

- [x] **Task 2:** Add repeat-offender and new signal ingestion
  - `signals.ts` now reads config thresholds and applies repeat-offender score boosts.
  - Added `EVENT_COLLISION_DUPLICATE` and `REFERRAL_LOOP_ABUSE` ingestion paths.

- [x] **Task 3:** Add queue/SLA overview monitoring
  - Added `/api/platform/marketplace/integrity/overview`.
  - Added `IntegrityOverviewPanel` in integrity workspace tab.

## Verification Strategy

- Grep checks for new signal types/config/escalation function updates.
- `pnpm --dir web exec tsc --noEmit`
- `pnpm --dir web lint`
- `pnpm --dir web test -- integrity-related tests`

## Risks + Mitigations

- Config misuse risk: DB constraints enforce sane threshold ranges and ordering.
- Repeat-offender over-penalization: boost only triggers after confirmed-case threshold.
- Operational blind spots: overview panel shows open/investigating counts and SLA breaches.
