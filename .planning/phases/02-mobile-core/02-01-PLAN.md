---
phase: 02-mobile-core
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - mobile/package.json
  - mobile/app.json
  - mobile/components/ui/LargeTapButton.tsx
  - mobile/components/ui/BottomSheetPicker.tsx
  - mobile/components/ui/StatusBadge.tsx
  - mobile/services/taxonomy/injury-types.ts
  - mobile/services/taxonomy/body-parts.ts
  - mobile/services/taxonomy/treatment-types.ts
  - mobile/services/taxonomy/near-miss-categories.ts
  - mobile/services/taxonomy/daily-check-items.ts
  - mobile/services/taxonomy/outcome-categories.ts
autonomous: true

must_haves:
  truths:
    - "Medic can install and launch the app with all required libraries available"
    - "Medic sees large, gloves-friendly buttons (56pt+) throughout every screen"
    - "Medic can pick from standardized injury, body part, and treatment lists when logging"
  artifacts:
    - path: "mobile/package.json"
      provides: "All Phase 2 dependencies installed"
      contains: "react-native-signature-canvas"
    - path: "mobile/components/ui/LargeTapButton.tsx"
      provides: "Gloves-on button component with 56pt min height"
      min_lines: 30
    - path: "mobile/components/ui/BottomSheetPicker.tsx"
      provides: "Bottom sheet modal for pick list selections"
      min_lines: 40
    - path: "mobile/services/taxonomy/injury-types.ts"
      provides: "RIDDOR + minor injury categories as typed array"
      min_lines: 20
  key_links:
    - from: "mobile/components/ui/LargeTapButton.tsx"
      to: "react-native"
      via: "Pressable with minHeight 56"
      pattern: "minHeight.*56"
    - from: "mobile/components/ui/BottomSheetPicker.tsx"
      to: "@gorhom/react-native-bottom-sheet"
      via: "BottomSheet import"
      pattern: "import.*BottomSheet"
---

<objective>
Install all Phase 2 dependencies, create shared gloves-on UI components, and define construction safety taxonomy data used by all mobile workflows.

Purpose: Every Phase 2 feature (treatments, near-misses, workers, daily checks) needs large tap target UI components and standardized pick list data. Building these first prevents duplication and ensures consistent UX across all workflows.
Output: Installed dependencies, 3 shared UI components, 6 taxonomy data files.
</objective>

<execution_context>
@/Users/sabineresoagli/.claude/get-shit-done/workflows/execute-plan.md
@/Users/sabineresoagli/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-mobile-core/02-RESEARCH.md
@.planning/phases/01-foundation/01-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install Phase 2 dependencies and configure Expo plugins</name>
  <files>mobile/package.json, mobile/app.json</files>
  <action>
  Install all Phase 2 dependencies from the mobile/ directory:

  ```bash
  cd mobile
  npx expo install expo-image-picker expo-image-manipulator expo-location
  npm install react-native-signature-canvas react-native-webview
  npm install react-hook-form @gorhom/react-native-bottom-sheet
  npx expo install react-native-reanimated react-native-gesture-handler
  npm install react-native-autocomplete-dropdown
  ```

  Update app.json plugins array to include:
  - "expo-image-picker" (for camera/gallery permissions)
  - "expo-location" (for GPS on near-misses, NEAR-07)

  Ensure react-native-reanimated babel plugin is configured in babel.config.js:
  ```js
  plugins: ['react-native-reanimated/plugin'] // MUST be last plugin
  ```

  Do NOT install expo-speech-recognition (deferred per research open question #1).
  Do NOT install @markerjs/react-native-markerjs yet (photo annotation is optional enhancement).
  </action>
  <verify>
  Run `cd mobile && npx expo doctor` to check dependency compatibility.
  Run `cd mobile && npx tsc --noEmit` to verify no TypeScript errors from new deps.
  Verify package.json contains: expo-image-picker, expo-image-manipulator, react-native-signature-canvas, react-hook-form, @gorhom/react-native-bottom-sheet, react-native-reanimated, react-native-gesture-handler, react-native-autocomplete-dropdown, expo-location.
  </verify>
  <done>All 9 dependencies installed, Expo plugins configured, TypeScript compiles clean.</done>
</task>

<task type="auto">
  <name>Task 2: Create shared gloves-on UI components</name>
  <files>mobile/components/ui/LargeTapButton.tsx, mobile/components/ui/BottomSheetPicker.tsx, mobile/components/ui/StatusBadge.tsx</files>
  <action>
  Create 3 shared UI components following research Pattern 2 (Gloves-On Large Tap Targets):

  **LargeTapButton.tsx:**
  - Pressable with minHeight: 56, minWidth: 56 (exceeds both iOS 44pt and Android 48pt)
  - Props: onPress, label, variant ('primary' | 'secondary' | 'danger'), icon (optional string), disabled
  - Primary: blue (#2563EB) bg, white text. Secondary: grey (#E5E7EB) bg, dark text. Danger: red (#EF4444) bg, white text
  - hitSlop: { top: 4, bottom: 4, left: 4, right: 4 } for extended touch area
  - Visual press feedback (opacity: 0.8 on press)
  - paddingHorizontal: 24, paddingVertical: 16, borderRadius: 8
  - fontSize: 18, fontWeight: '600'
  - marginVertical: 8 spacing between elements
  - High contrast colors for bright sunlight readability (UX-02)

  **BottomSheetPicker.tsx:**
  - Wraps @gorhom/react-native-bottom-sheet
  - Props: visible, onClose, title, items (array of {id, label, icon?}), onSelect(id)
  - Renders items as large tappable rows (minHeight: 56 per row)
  - Uses BottomSheetScrollView for scrollable content
  - keyboardBehavior="interactive" and keyboardBlurBehavior="restore" (per research Pitfall 5)
  - Snap points: ['50%', '90%'] for flexible height
  - Title bar with close button (56pt tap target)
  - Selected item shows checkmark

  **StatusBadge.tsx:**
  - Props: status ('green' | 'amber' | 'red' | 'grey'), label (string), size ('small' | 'large')
  - Green: #10B981 bg, Amber: #F59E0B bg, Red: #EF4444 bg, Grey: #9CA3AF bg
  - Large size: minHeight 56 (for interactive use). Small size: minHeight 28 (for display only)
  - High contrast text on colored backgrounds
  - borderRadius: 8
  </action>
  <verify>
  Verify files exist and contain proper TypeScript types.
  Run `cd mobile && npx tsc --noEmit` to confirm no type errors.
  Check LargeTapButton has minHeight: 56 in styles.
  Check BottomSheetPicker imports from @gorhom/react-native-bottom-sheet.
  Check StatusBadge has all 4 color variants.
  </verify>
  <done>3 UI components created with 56pt minimum tap targets, high contrast colors, TypeScript props interfaces, and proper imports.</done>
</task>

<task type="auto">
  <name>Task 3: Create construction safety taxonomy data files</name>
  <files>mobile/services/taxonomy/injury-types.ts, mobile/services/taxonomy/body-parts.ts, mobile/services/taxonomy/treatment-types.ts, mobile/services/taxonomy/near-miss-categories.ts, mobile/services/taxonomy/daily-check-items.ts, mobile/services/taxonomy/outcome-categories.ts</files>
  <action>
  Create 6 typed taxonomy data files from the research Injury & Safety Taxonomy section. Each file exports a typed const array with id, label, and category fields.

  **injury-types.ts:**
  - Export type InjuryType = { id: string; label: string; category: 'riddor_specified' | 'minor_first_aid'; isRiddorReportable: boolean }
  - Export const INJURY_TYPES: InjuryType[] with all RIDDOR Specified (8 items from research: fracture, amputation, loss of sight, crush injury, serious burn, loss of consciousness, scalping, hypothermia/asphyxia) and Minor Injuries (12 items: laceration, abrasion, contusion, sprain/strain, puncture wound, minor burn, foreign body in eye, headache, nausea/dizziness, insect bite/sting, splinter, blister)
  - RIDDOR items have isRiddorReportable: true (critical for Phase 6 auto-flagging)

  **body-parts.ts:**
  - Export type BodyPart = { id: string; label: string }
  - Export const BODY_PARTS: BodyPart[] with 15 items from research OIICS taxonomy (Head/Face, Eye, Neck, Shoulder, Arm/Elbow, Wrist/Hand, Finger/Thumb, Chest/Ribs, Back/Spine, Abdomen, Hip/Pelvis, Leg/Knee, Ankle/Foot, Toe, Multiple body parts)

  **treatment-types.ts:**
  - Export type TreatmentType = { id: string; label: string }
  - Export const TREATMENT_TYPES: TreatmentType[] with 14 items from research (cleaned and dressed, applied antiseptic, bandage/dressing, ice pack, pressure to stop bleeding, removed foreign body, eye wash, rest in welfare, paracetamol, water/rehydration, monitored, referred GP, referred A&E, called ambulance)

  **near-miss-categories.ts:**
  - Export type NearMissCategory = { id: string; label: string; icon: string }
  - Export const NEAR_MISS_CATEGORIES: NearMissCategory[] with 13 items from research (fall from height, struck by moving object, struck by falling object, slip-trip-fall, electrical, fire/explosion, confined space, lifting/manual handling, plant/vehicle, structural collapse, chemical/hazardous, environmental, other)

  **daily-check-items.ts:**
  - Export type DailyCheckItem = { id: string; label: string; order: number }
  - Export const DAILY_CHECK_ITEMS: DailyCheckItem[] with 10 items from research in order (first aid kit, AED, eyewash, welfare facilities, site access routes, PPE, housekeeping, weather, visible hazards, emergency vehicle access)

  **outcome-categories.ts:**
  - Export type OutcomeCategory = { id: string; label: string; severity: 'low' | 'medium' | 'high' }
  - Export const OUTCOME_CATEGORIES: OutcomeCategory[] with 7 items (returned to work same duties=low, light duties=medium, sent home=medium, referred GP=medium, referred A&E=high, ambulance called=high, hospitalized=high)

  Use kebab-case for all id values (e.g., 'minor-cut', 'head-face', 'fall-from-height').
  </action>
  <verify>
  Run `cd mobile && npx tsc --noEmit` to verify all files compile.
  Verify injury-types.ts has exactly 20 entries (8 RIDDOR + 12 minor).
  Verify body-parts.ts has exactly 15 entries.
  Verify daily-check-items.ts has exactly 10 entries.
  Verify all RIDDOR items have isRiddorReportable: true.
  </verify>
  <done>6 taxonomy files created with typed arrays, all items from research included, RIDDOR flags set correctly, TypeScript compiles clean.</done>
</task>

</tasks>

<verification>
- All dependencies resolvable: `cd mobile && npx expo doctor`
- TypeScript clean: `cd mobile && npx tsc --noEmit`
- UI components have 56pt min tap targets
- Taxonomy data matches research exactly (item counts verified)
</verification>

<success_criteria>
- 9 new npm packages installed and compatible with Expo SDK 54
- 3 shared UI components with gloves-on 56pt tap targets
- 6 taxonomy data files with typed arrays matching HSE/OIICS standards
- Zero TypeScript errors
</success_criteria>

<output>
After completion, create `.planning/phases/02-mobile-core/02-01-SUMMARY.md`
</output>
