# 51-01 Plan — Escalation Queue and Review Workflow

## Objective

Turn integrity risk scores into actionable platform operations by auto-creating review cases for high-risk events and enabling platform admins to resolve cases with clear payout-hold control.

## Requirements Coverage IDs

- `INT-12` — High-risk events are escalated into a trackable review queue.
- `INT-13` — Escalated events can apply payout holds until reviewed.
- `INT-14` — Platform admins can resolve cases with auditable outcomes.

## Tasks

- [x] **Task 1:** Add escalation schema and score-trigger automation
  - Migration `167_marketplace_integrity_escalation.sql`
  - Added case table, case event log, high-risk trigger, and hold application.

- [x] **Task 2:** Add platform admin resolution API
  - `POST /api/platform/marketplace/integrity/cases/[caseId]/resolve`
  - Supports dismiss/confirm outcomes with required notes.

- [x] **Task 3:** Surface queue and triage controls in admin workspace
  - Added `integrity` entity tab to platform workspace.
  - Added case panel with resolution actions and hold-release flow.

## Verification Strategy

- Grep checks for escalation tables/trigger and API wiring.
- `pnpm --dir web exec tsc --noEmit`
- `pnpm --dir web lint`
- `pnpm --dir web test -- <integrity suites>`

## Risks + Mitigations

- Over-holding from false positives: hold only auto-applies for high-risk band; manual resolution required.
- Operator ambiguity: enforce mandatory resolution notes and event log entries.
- Drift between score and case status: trigger updates active case score whenever score row updates.
