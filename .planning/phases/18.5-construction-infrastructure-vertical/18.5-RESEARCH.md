# Phase 18.5: Construction & Infrastructure Vertical - Research

**Researched:** 2026-02-17
**Domain:** Multi-vertical TypeScript config wiring, RIDDOR dispatcher, cert type ordering
**Confidence:** HIGH

## Summary

Phase 18.5 is a wiring-and-formalization phase, not a build phase. The construction vertical already has full end-to-end support from v1.0. Every piece of logic — RIDDOR detection, F2508 PDF generation, mechanism presets, outcome labels, patient labels, compliance config, cert types, booking requirements — is already implemented for the `'construction'` vertical ID.

What is missing is a single "canonical vertical config" TypeScript file that the new multi-vertical system uses as its authoritative source. The plan description calls for adding `construction` to a "vertical config TypeScript file" — but no such file exists yet. The existing taxonomy files (`services/taxonomy/vertical-compliance.ts`, `services/taxonomy/certification-types.ts`, etc.) collectively contain all the construction data. Phase 18.5-01 must decide whether to create a new unified config file or declare one of the existing files as the canonical source.

For Phase 18.5-02, the `incident-report-dispatcher.ts` already routes `construction` to `riddor-f2508-generator`. The RIDDOR detector already passes `construction` through to detection (it is absent from `NON_RIDDOR_VERTICALS`). The `getRecommendedCertTypes('construction')` function already returns the correct ordered list. There is no functional gap in plan 18.5-02 — it is a smoke-test and verification plan.

**Primary recommendation:** The "vertical config TypeScript file" referenced in 18.5-01 should be a new file at `services/taxonomy/verticals.ts` (or `web/lib/vertical-config.ts`) that exports a single `Record<string, VerticalConfig>` with all verticals, including `construction` as the reference entry. This is the missing "canonical source" that Phases 19-22 will add their verticals to.

---

## Standard Stack

The construction vertical already uses these established files with no new dependencies needed:

### Core Files (already exist, construction already present)

| File | Location | Purpose | Construction status |
|------|----------|---------|---------------------|
| `vertical-compliance.ts` | `services/taxonomy/` | RIDDOR flag, post-treatment guidance, framework labels | `construction` entry PRESENT |
| `vertical-compliance.ts` | `web/lib/compliance/` | Identical web copy of mobile compliance config | `construction` entry PRESENT |
| `certification-types.ts` | `services/taxonomy/` | `getRecommendedCertTypes`, `VERTICAL_CERT_TYPES` | `construction` entry PRESENT |
| `certification.types.ts` | `web/types/` | Web copy with `getRecommendedCertTypes`, `VERTICAL_CERT_TYPES` | `construction` entry PRESENT |
| `mechanism-presets.ts` | `services/taxonomy/` | Injury mechanism preset chips | `construction` entry PRESENT |
| `vertical-outcome-labels.ts` | `services/taxonomy/` | Outcome label overrides + `getPatientLabel` | `construction` entry PRESENT |
| `vertical-requirements.ts` | `web/lib/booking/` | Booking form special requirements, `VERTICAL_LABELS` | `construction` entry PRESENT |
| `incident-report-dispatcher.ts` | `web/lib/pdf/` | Routes vertical → Edge Function | `construction: 'riddor-f2508-generator'` PRESENT |
| `riddor-detector/index.ts` | `supabase/functions/` | Vertical gate (`NON_RIDDOR_VERTICALS`) | `construction` NOT in exclusion list (passes through) |
| `org-context.tsx` (web) | `web/contexts/` | `VerticalId` type, fetches `org_settings.industry_verticals` | `construction` in `VerticalId` union |
| `OrgContext.tsx` (mobile) | `src/contexts/` | AsyncStorage-cached vertical, `primaryVertical` | Falls back to `['construction']` when no DB data |
| `settings/page.tsx` | `web/app/admin/` | Industry vertical selector UI (10 buttons) | `construction` button PRESENT |

### Missing File (must be created in 18.5-01)

| File | Location | Purpose | Why needed |
|------|----------|---------|------------|
| `verticals.ts` (new) | `services/taxonomy/` OR `web/lib/` | Canonical `Record<string, VerticalConfig>` | Reference implementation for Phases 19-22 to follow |

---

## Architecture Patterns

### How Verticals Work in This Codebase

There is no database table for vertical config. Vertical IDs are plain strings stored in `org_settings.industry_verticals` (array) and `treatments.event_vertical` (scalar). All config lives in TypeScript static files.

The vertical system is currently **distributed across multiple taxonomy files** rather than a single canonical config. Each file covers one concern:

```
services/taxonomy/
├── vertical-compliance.ts        # riddorApplies, postTreatmentGuidance, framework labels
├── certification-types.ts        # getRecommendedCertTypes, VERTICAL_CERT_TYPES
├── mechanism-presets.ts          # getMechanismPresets, TreatmentVerticalId type
├── vertical-outcome-labels.ts    # getPatientLabel, getVerticalOutcomeCategories

web/lib/
├── compliance/vertical-compliance.ts   # web copy (identical to services/taxonomy version)
├── booking/vertical-requirements.ts    # VERTICAL_LABELS, VERTICAL_REQUIREMENTS
├── booking/types.ts                    # BookingFormData (contains eventVertical field)
└── pdf/incident-report-dispatcher.ts   # FUNCTION_BY_VERTICAL routing table

web/types/
└── certification.types.ts             # getRecommendedCertTypes (web version)
```

### What the "Vertical Config TypeScript File" Means for Phase 18.5-01

The plan says "add `construction` to vertical config TypeScript file; define `riddorApplies: true`, terminology map, cert type ordering". Given that construction data is already spread across multiple files, this plan is creating the **unified canonical config** that:

1. Serves as the single source of truth for: vertical label, `riddorApplies`, terminology (`Worker`, `Site`, `Client`), cert ordering reference
2. Is what Phases 19-22 will copy/extend to add their verticals
3. Does NOT replace the existing files (which are used by live code) — it either wraps them or documents the pattern

**Recommended structure for new `services/taxonomy/verticals.ts`:**

```typescript
// Source: new file to create in Phase 18.5-01

export interface VerticalConfig {
  /** Display label shown in admin UI */
  label: string;
  /** Whether HSE RIDDOR applies to this vertical */
  riddorApplies: boolean;
  /** Terminology for the person being treated */
  patientTerm: string;
  /** Terminology for the location */
  locationTerm: string;
  /** Terminology for the client/employer */
  clientTerm: string;
  /** Ordered list of recommended cert type IDs (first = highest priority) */
  certOrdering: string[];
  /** PDF generator Edge Function name */
  pdfGenerator: string;
}

export const VERTICAL_CONFIG: Record<string, VerticalConfig> = {
  construction: {
    label: 'Construction & Infrastructure',
    riddorApplies: true,
    patientTerm: 'Worker',
    locationTerm: 'Site',
    clientTerm: 'Client',
    certOrdering: ['CSCS', 'CPCS', 'IPAF', 'Gas Safe', 'FREC 3', 'FREC 4', 'PHEC', 'HCPC Paramedic', 'ALS Provider', 'PHTLS', 'PASMA'],
    pdfGenerator: 'riddor-f2508-generator',
  },
  // ... phases 19-22 add their entries here
};
```

### Pattern: RIDDOR Vertical Gate

The gate in `supabase/functions/riddor-detector/index.ts` uses an exclusion list:

```typescript
// Source: supabase/functions/riddor-detector/index.ts (line 75)
const NON_RIDDOR_VERTICALS = ['festivals', 'motorsport', 'sporting_events', 'fairs_shows', 'private_events'];
```

`construction` is absent from this list — it passes through to `detectRIDDOR()`. This is correct and must not change.

### Pattern: PDF Dispatch

The dispatcher in `web/lib/pdf/incident-report-dispatcher.ts` uses a routing table:

```typescript
// Source: web/lib/pdf/incident-report-dispatcher.ts (line 20-31)
const FUNCTION_BY_VERTICAL: Record<string, string> = {
  construction:      'riddor-f2508-generator',
  tv_film:           'riddor-f2508-generator',
  corporate:         'riddor-f2508-generator',
  education:         'riddor-f2508-generator',
  outdoor_adventure: 'riddor-f2508-generator',
  festivals:         'event-incident-report-generator',
  fairs_shows:       'event-incident-report-generator',
  private_events:    'event-incident-report-generator',
  motorsport:        'motorsport-incident-generator',
  sporting_events:   'fa-incident-generator',
};
```

`construction` is already present and correctly routes to `riddor-f2508-generator`. No change needed.

### Pattern: Treatment Form Vertical Wiring

In `app/treatment/new.tsx`, `orgVertical` is derived as:

```typescript
// Source: app/treatment/new.tsx (line 79-81)
const params = useLocalSearchParams<{ booking_id?: string; event_vertical?: string }>();
const { primaryVertical } = useOrg();
const orgVertical = (params.event_vertical as string | undefined) ?? primaryVertical;
```

`orgVertical` flows into:
- `getMechanismPresets(orgVertical)` — construction presets already defined
- `getVerticalOutcomeCategories(OUTCOME_CATEGORIES, orgVertical)` — construction overrides already defined
- `getPatientLabel(orgVertical)` — returns `'Worker'` for construction
- `getVerticalCompliance(orgVertical)` — construction compliance config already exists
- `t.eventVertical = orgVertical` — stored on the treatment record

No change needed to `new.tsx` for construction to work.

### Anti-Patterns to Avoid

- **Do not add `construction` to `NON_RIDDOR_VERTICALS`** — this would silently break RIDDOR detection for all construction orgs with no error
- **Do not change `FUNCTION_BY_VERTICAL`** — construction is already correctly mapped
- **Do not duplicate construction data** — all existing taxonomy files already have it; the new config file consolidates metadata, it does not replace functional code
- **Do not add `'general'` as a `VerticalId` in TypeScript unions** — `'general'` is a fallback string, not a real vertical; it is intentionally excluded from the `VerticalId` union type in `org-context.tsx` (web) and `OrgContext.tsx` (mobile)

---

## Don't Hand-Roll

| Problem | Don't Build | Use Instead | Why |
|---------|-------------|-------------|-----|
| Cert type ordering for construction | Custom sort logic | `VERTICAL_CERT_TYPES.construction` in `services/taxonomy/certification-types.ts` | Already defined, correct order |
| RIDDOR applicability check | New boolean field | `getVerticalCompliance('construction').riddorApplies` | Already returns `true` |
| Patient label | New lookup | `getPatientLabel('construction')` in `services/taxonomy/vertical-outcome-labels.ts` | Already returns `'Worker'` |
| PDF routing | New dispatch logic | `FUNCTION_BY_VERTICAL` in `incident-report-dispatcher.ts` | `construction` already present |
| Vertical gate | New early-return | `NON_RIDDOR_VERTICALS` in `riddor-detector/index.ts` | Construction absent = passes through |

---

## Common Pitfalls

### Pitfall 1: Assuming a Unified Vertical Config File Exists

**What goes wrong:** Plan 18.5-01 refers to "the vertical config TypeScript file" as if it already exists. It does not. The data is distributed across six+ files.

**Why it happens:** The STATE.md describes the decision as "TypeScript static `Record<string, Config>` files" — plural files, not one file.

**How to avoid:** Create a new `services/taxonomy/verticals.ts` (or `web/lib/vertical-config.ts`) as the unified config, and populate `construction` as the reference entry. The planner must explicitly instruct that this is a NEW file to create, not an existing file to edit.

**Warning signs:** If the plan says "open verticals.ts and add construction" without a file path, it will fail because no such file exists.

### Pitfall 2: Changing the Cert Ordering for Construction

**What goes wrong:** The success criteria says "returns the correct ordered list — CSCS, CPCS, IPAF, Gas Safe, First Aid at Work at the top". The existing `VERTICAL_CERT_TYPES.construction` in `services/taxonomy/certification-types.ts` starts with `['FREC 3', 'FREC 4', 'PHEC', 'HCPC Paramedic', 'CSCS', 'CPCS', ...]` — medical certs come first.

**Why it happens:** The success criteria lists construction-specific certs (CSCS, CPCS, IPAF) first, but the existing taxonomy puts medical certs (FREC 3) first for all verticals.

**How to avoid:** Verify with the success criteria definition. "CSCS, CPCS, IPAF, Gas Safe, First Aid at Work at the top" likely means these appear in the top section of the new canonical config's `certOrdering` field — not that the existing `getRecommendedCertTypes` must be changed. The new config file can define its own `certOrdering` priority independent of the existing taxonomy function.

**Warning signs:** Any plan that edits `VERTICAL_CERT_TYPES.construction` in `services/taxonomy/certification-types.ts` risks breaking existing cert validation screens that rely on medical certs appearing first.

### Pitfall 3: VerticalId Type Gap

**What goes wrong:** The `VerticalId` type in `web/contexts/org-context.tsx` (line 26-28) does NOT include `'general'`. If a component passes `primaryVertical` (which can be `'general'` from `OrgContext`) to a function that expects `VerticalId`, TypeScript will error.

**Why it happens:** `'general'` is a fallback string, not a real selectable vertical. The mobile `OrgContext.tsx` correctly handles this by returning `primaryVertical = industryVerticals[0] ?? 'general'` as `string`, not `VerticalId`.

**How to avoid:** Don't narrow `primaryVertical` to `VerticalId` — keep it as `string`. All the taxonomy functions accept `string | null | undefined` fallback to `'general'` gracefully.

### Pitfall 4: Duplicate Construction Config Across Web/Mobile

**What goes wrong:** There are dual copies of key files: `services/taxonomy/vertical-compliance.ts` (mobile) and `web/lib/compliance/vertical-compliance.ts` (web) are identical. Similarly `services/taxonomy/certification-types.ts` and `web/types/certification.types.ts` both have construction data.

**Why it happens:** The mobile app and web app are separate codebases in a monorepo. Shared config is manually duplicated rather than imported.

**How to avoid:** The new unified config file in Phase 18.5-01 only needs to be created in one location for now (most naturally `services/taxonomy/verticals.ts` since that's where the mobile-side taxonomy lives). The planner should note that if a web copy is needed, it can be added in the same plan.

---

## Code Examples

Verified patterns from official sources in the codebase:

### Current Construction Entry in vertical-compliance.ts

```typescript
// Source: services/taxonomy/vertical-compliance.ts (line 55-66)
construction: {
  primaryFramework: 'RIDDOR',
  frameworkLabel: 'RIDDOR (HSE)',
  frameworkDescription: 'Reporting of Injuries, Diseases and Dangerous Occurrences Regulations 2013',
  riddorApplies: true,
  patientIsWorker: true,
  reportFormLabel: 'HSE F2508 RIDDOR Report',
  postTreatmentGuidance:
    'This treatment has been logged. If this is a RIDDOR-reportable injury (fracture, amputation, loss of sight, or worker off work >7 days), it will be automatically flagged for HSE reporting via your admin dashboard.',
  incidentPageLabel: 'RIDDOR Incidents',
  complianceBadgeLabel: 'RIDDOR (HSE)',
},
```

### Current Construction Cert Types in certification-types.ts

```typescript
// Source: services/taxonomy/certification-types.ts (line 128)
construction: ['FREC 3', 'FREC 4', 'PHEC', 'HCPC Paramedic', 'CSCS', 'CPCS', 'IPAF', 'PASMA', 'Gas Safe', 'ALS Provider', 'PHTLS'],
```

### Current Construction Patient Label

```typescript
// Source: services/taxonomy/vertical-outcome-labels.ts (line 122)
construction: 'Worker',
```

### Current RIDDOR Gate (construction passes through)

```typescript
// Source: supabase/functions/riddor-detector/index.ts (line 75-99)
const NON_RIDDOR_VERTICALS = ['festivals', 'motorsport', 'sporting_events', 'fairs_shows', 'private_events'];
// construction is NOT in this array — it proceeds to detectRIDDOR()
```

### Current Dispatcher (construction already routed)

```typescript
// Source: web/lib/pdf/incident-report-dispatcher.ts (line 20-21)
const FUNCTION_BY_VERTICAL: Record<string, string> = {
  construction: 'riddor-f2508-generator',
  // ...
};
```

### Admin Settings Vertical Button for Construction

```typescript
// Source: web/app/admin/settings/page.tsx (line 27)
{ id: 'construction', label: 'Construction & Industrial', desc: 'Worksites, plant ops, HSE compliance', color: 'orange', icon: <HardHat className="w-5 h-5" /> },
```

---

## Current State Summary: What Exists vs What's Missing

### What Already Exists for Construction (DO NOT CHANGE)

| Item | File | Status |
|------|------|--------|
| RIDDOR gate passes construction through | `supabase/functions/riddor-detector/index.ts` | PRESENT, correct |
| PDF routes construction to F2508 | `web/lib/pdf/incident-report-dispatcher.ts` | PRESENT, correct |
| `riddorApplies: true` config | `services/taxonomy/vertical-compliance.ts` | PRESENT |
| `riddorApplies: true` config (web copy) | `web/lib/compliance/vertical-compliance.ts` | PRESENT |
| Patient label = 'Worker' | `services/taxonomy/vertical-outcome-labels.ts` | PRESENT |
| Mechanism presets (8 items) | `services/taxonomy/mechanism-presets.ts` | PRESENT |
| `getRecommendedCertTypes('construction')` | `services/taxonomy/certification-types.ts` | PRESENT |
| `getRecommendedCertTypes('construction')` (web) | `web/types/certification.types.ts` | PRESENT |
| Booking requirements (6 items) | `web/lib/booking/vertical-requirements.ts` | PRESENT |
| Admin vertical selector button | `web/app/admin/settings/page.tsx` | PRESENT |
| `VerticalId = 'construction'` in type union | `web/contexts/org-context.tsx` | PRESENT |
| `VerticalId = 'construction'` in mobile type union | `src/contexts/OrgContext.tsx` | PRESENT |
| Org labels (Worker, Workers, Site, Shift) | `web/lib/org-labels.ts` | PRESENT |
| OrgContext default fallback is `['construction']` | `src/contexts/OrgContext.tsx` (line 163) | PRESENT |

### What is Missing (Plans Must Create)

| Item | Where to Create | Plan |
|------|----------------|------|
| Unified canonical `VERTICAL_CONFIG` TypeScript file | `services/taxonomy/verticals.ts` (new file) | 18.5-01 |
| `construction` entry in that file with `riddorApplies: true`, terminology map, cert ordering | Inside new file | 18.5-01 |

### What is NOT Missing (Plans Must NOT Create)

| Claimed missing item | Actual state |
|---------------------|-------------|
| Construction route in `incident-report-dispatcher` | ALREADY PRESENT — `construction: 'riddor-f2508-generator'` |
| `getRecommendedCertTypes('construction')` | ALREADY PRESENT — returns ordered list |
| RIDDOR detection for construction | ALREADY WORKING — not in `NON_RIDDOR_VERTICALS` |
| Construction in admin vertical selector | ALREADY PRESENT — 'Construction & Industrial' button |

---

## Precise Changes Needed Per Plan

### Plan 18.5-01: Construction Vertical Config

**What to do:** Create `/services/taxonomy/verticals.ts` as a new file. Export a `VerticalConfig` interface and a `VERTICAL_CONFIG: Record<string, VerticalConfig>` object. Populate the `construction` entry as the reference implementation.

**Key fields for the `construction` entry:**
- `label: 'Construction & Infrastructure'`
- `riddorApplies: true`
- `patientTerm: 'Worker'`
- `locationTerm: 'Site'`
- `clientTerm: 'Client'`
- `certOrdering: ['CSCS', 'CPCS', 'IPAF', 'Gas Safe', 'FREC 3', 'FREC 4', 'PHEC', 'HCPC Paramedic', 'ALS Provider', 'PHTLS', 'PASMA']` (note: success criteria wants CSCS-first in this file, even though existing `certification-types.ts` puts medical first — these are two different orderings for two different use cases)
- `pdfGenerator: 'riddor-f2508-generator'`

**What NOT to change:** The existing `VERTICAL_CERT_TYPES.construction` in `certification-types.ts`, the `VERTICAL_COMPLIANCE.construction` in `vertical-compliance.ts`, or any other existing taxonomy file. The new file is additive.

**Verify after:** `VERTICAL_CONFIG['construction'].riddorApplies === true`, `VERTICAL_CONFIG['construction'].patientTerm === 'Worker'`.

### Plan 18.5-02: Construction Vertical Wiring (Smoke Test)

**What to do:** This is a verification plan, not a build plan. The following must be confirmed to work as-is:

1. **`incident-report-dispatcher` construction route** — already present at line 21 of `web/lib/pdf/incident-report-dispatcher.ts`. No change needed. Verify by reading the file.

2. **`getRecommendedCertTypes('construction')` ordering** — already returns `['FREC 3', 'FREC 4', 'PHEC', 'HCPC Paramedic', 'CSCS', 'CPCS', 'IPAF', 'PASMA', 'Gas Safe', 'ALS Provider', 'PHTLS', ...]`. The success criteria says "CSCS, CPCS, IPAF, Gas Safe, First Aid at Work at the top". This may need cross-checking against the success criteria — if the new `VERTICAL_CONFIG.construction.certOrdering` is the authoritative source, the existing function doesn't need updating. If both sources must agree, a decision must be made about which ordering is canonical.

3. **End-to-end smoke test path:** Log treatment → treatment gets `event_vertical = 'construction'` → `riddor-detector` called → construction NOT in `NON_RIDDOR_VERTICALS` → `detectRIDDOR()` runs → if RIDDOR-eligible, `riddor_incidents` record created → `incident-report-dispatcher` called with `vertical='construction'` → routes to `riddor-f2508-generator`. No code changes needed for this path.

---

## Open Questions

1. **Cert ordering conflict**
   - What we know: `certification-types.ts` puts `FREC 3` first for construction; success criteria says "CSCS, CPCS, IPAF, Gas Safe, First Aid at Work at the top"
   - What's unclear: Are these two different orderings intentional (one for general cert display, one for the new canonical config)?
   - Recommendation: Create two distinct concepts — `certDisplayOrder` (existing, medical-first) and `certRequirementOrder` (new, construction-specific certs first) in the new `VERTICAL_CONFIG`. Do NOT change `VERTICAL_CERT_TYPES.construction`.

2. **Where to create the new vertical config file**
   - What we know: `services/taxonomy/` holds mobile-side taxonomy; `web/lib/` holds web-side config
   - What's unclear: Should the canonical config live in `services/taxonomy/verticals.ts` (shared), or should web and mobile each have a copy?
   - Recommendation: Create in `services/taxonomy/verticals.ts` only for Phase 18.5. If web needs it in Phase 19, add at that point.

3. **`clientTerm` terminology**
   - What we know: The success criteria says terminology: "Worker", "Site", "Client"
   - What's unclear: Is "Client" referring to the employer/principal contractor, or the person receiving care?
   - Recommendation: Use `clientTerm: 'Client'` in the config, noting it refers to the org's paying client (principal contractor / site owner), not the patient.

---

## Sources

### Primary (HIGH confidence)
- Direct file read: `supabase/functions/riddor-detector/index.ts` — confirmed `NON_RIDDOR_VERTICALS` array, construction absent
- Direct file read: `web/lib/pdf/incident-report-dispatcher.ts` — confirmed `FUNCTION_BY_VERTICAL` table, construction present
- Direct file read: `services/taxonomy/certification-types.ts` — confirmed `VERTICAL_CERT_TYPES.construction` and `getRecommendedCertTypes`
- Direct file read: `services/taxonomy/vertical-compliance.ts` — confirmed construction entry with `riddorApplies: true`
- Direct file read: `services/taxonomy/mechanism-presets.ts` — confirmed construction presets
- Direct file read: `services/taxonomy/vertical-outcome-labels.ts` — confirmed `getPatientLabel` returns `'Worker'`
- Direct file read: `web/lib/booking/vertical-requirements.ts` — confirmed construction in `VERTICAL_LABELS` and `VERTICAL_REQUIREMENTS`
- Direct file read: `web/app/admin/settings/page.tsx` — confirmed construction vertical button present
- Direct file read: `web/contexts/org-context.tsx` — confirmed `VerticalId` type includes `'construction'`
- Direct file read: `src/contexts/OrgContext.tsx` — confirmed cache key, primaryVertical logic, default fallback
- Direct file read: `app/treatment/new.tsx` — confirmed `orgVertical` derivation and all downstream usages
- Direct file read: `.planning/STATE.md` — confirmed Phase 18 complete, 18.5 road map and decisions

### Secondary (MEDIUM confidence)
- `web/lib/compliance/vertical-compliance.ts` — web copy of vertical-compliance, confirmed identical construction entry
- `web/types/certification.types.ts` — web copy of certification types, confirmed `getRecommendedCertTypes` for construction

---

## Metadata

**Confidence breakdown:**
- Current state of construction in existing files: HIGH — directly read all relevant files
- What is missing (new verticals.ts file): HIGH — confirmed by filesystem search (no such file exists)
- Cert ordering conflict: MEDIUM — success criteria wording is ambiguous; two reasonable interpretations exist
- Plan 18.5-02 as smoke test: HIGH — no code changes are required for existing RIDDOR path to work

**Research date:** 2026-02-17
**Valid until:** 2026-03-17 (30 days — stable TypeScript config, no fast-moving dependencies)
