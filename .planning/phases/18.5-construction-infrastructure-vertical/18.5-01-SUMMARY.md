---
phase: 18.5-construction-infrastructure-vertical
plan: 01
subsystem: api
tags: [typescript, vertical-config, construction, riddor, taxonomy, multi-vertical]

# Dependency graph
requires:
  - phase: 18-vertical-infrastructure-riddor-fix
    provides: RIDDOR gate, vertical compliance framework, PDF dispatcher, WatermelonDB v4 schema
provides:
  - VerticalConfig TypeScript interface with 7 canonical fields
  - VERTICAL_CONFIG record with construction reference entry
  - getVerticalConfig() lookup helper
  - Additive-only taxonomy file that Phases 19–22 extend with new vertical entries
affects:
  - 19-motorsport-vertical
  - 20-festivals-vertical
  - 21-film-tv-vertical
  - 22-football-vertical

# Tech tracking
tech-stack:
  added: []
  patterns:
    - "Static TypeScript Record<string, VerticalConfig> as single source of truth for vertical metadata"
    - "Additive vertical registration pattern — each future phase appends one entry to VERTICAL_CONFIG"
    - "Separation of concerns: verticals.ts owns display/routing metadata; vertical-compliance.ts owns RIDDOR/framework logic"

key-files:
  created:
    - services/taxonomy/verticals.ts
  modified: []

key-decisions:
  - "certOrdering placed in VERTICAL_CONFIG for reference/documentation; runtime cert recommendation still delegated to getRecommendedCertTypes() in certification-types.ts"
  - "getVerticalConfig() returns undefined for unregistered verticals — callers must handle gracefully; avoids silent fallback to wrong config"
  - "construction is the reference entry; all Phase 19–22 entries follow the same 7-field shape"

patterns-established:
  - "Vertical ID key pattern: lowercase snake_case string matching org_settings.industry_verticals and treatments.event_vertical DB values"
  - "pdfGenerator field: Edge Function name string — matches routing table in incident-report-dispatcher.ts"

# Metrics
duration: 2min
completed: 2026-02-18
---

# Phase 18.5 Plan 01: Canonical VERTICAL_CONFIG with Construction Reference Entry Summary

**TypeScript `VERTICAL_CONFIG` record with `VerticalConfig` interface and `getVerticalConfig()` helper — construction entry with riddorApplies true, CSCS-first cert ordering, and riddor-f2508-generator routing**

## Performance

- **Duration:** 2 min
- **Started:** 2026-02-18T03:41:56Z
- **Completed:** 2026-02-18T03:43:00Z
- **Tasks:** 1
- **Files modified:** 1 (created)

## Accomplishments

- Created `services/taxonomy/verticals.ts` as the canonical single source of truth for multi-vertical metadata
- Defined `VerticalConfig` interface covering all 7 fields: label, riddorApplies, patientTerm, locationTerm, clientTerm, certOrdering, pdfGenerator
- Added construction reference entry: `riddorApplies: true`, `label: 'Construction & Infrastructure'`, `patientTerm: 'Worker'`, `locationTerm: 'Site'`, `clientTerm: 'Client'`, certOrdering CSCS-first (11 certs), `pdfGenerator: 'riddor-f2508-generator'`
- Established additive registration pattern for Phases 19–22 to follow

## Task Commits

Each task was committed atomically:

1. **Task 1: Create services/taxonomy/verticals.ts — canonical vertical config (NEW FILE)** - `226101c` (feat)

**Plan metadata:** `(pending docs commit)`

## Files Created/Modified

- `services/taxonomy/verticals.ts` - Canonical vertical config with VerticalConfig interface, VERTICAL_CONFIG record, and getVerticalConfig() helper; construction is reference entry; Phase 19–22 stubs as comments

## Decisions Made

- `certOrdering` placed in `VERTICAL_CONFIG` for documentation/reference purposes only; the existing `getRecommendedCertTypes()` in `certification-types.ts` remains the runtime function for cert recommendations — avoids duplicating business logic
- `getVerticalConfig()` returns `VerticalConfig | undefined` (not a default fallback) — callers must explicitly handle unknown verticals, preventing silent misconfiguration
- No existing taxonomy file was modified — this is a purely additive file following the plan's strict constraint

## Deviations from Plan

None - plan executed exactly as written.

## Issues Encountered

None.

## User Setup Required

None - no external service configuration required.

## Next Phase Readiness

- `services/taxonomy/verticals.ts` is ready for Phase 18.5 Plan 02 to import and test
- Phase 19 (Motorsport) can add its entry to `VERTICAL_CONFIG` following the construction pattern
- Phases 20–22 follow the same additive pattern
- No blockers

---
*Phase: 18.5-construction-infrastructure-vertical*
*Completed: 2026-02-18*
