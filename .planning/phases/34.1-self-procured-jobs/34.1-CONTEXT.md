# Phase 34.1: Self-Procured Jobs - Context

**Gathered:** 2026-02-19
**Status:** Ready for planning

<domain>
## Phase Boundary

Companies with a SiteMedic subscription can create and manage jobs they sourced themselves (outside the marketplace) alongside marketplace-awarded jobs. Self-procured jobs flow through the same booking, timesheet, payout, and compliance reporting systems as marketplace jobs — but with zero platform commission (subscription covers it). The SiteMedic platform dashboard shows both job types; the marketplace dashboard shows only marketplace jobs.

This phase covers: job creation wizard, self-procured booking record with `source='direct'`, client record creation, payment flow (Stripe checkout for deposit + remainder), payout to company (0% commission), dashboard integration with source filtering and badges, and client portal access for self-procured job clients.

</domain>

<decisions>
## Implementation Decisions

### Job Entry Flow
- Full wizard (same depth as marketplace event wizard) — not a quick form
- Entry point lives in the main SiteMedic platform dashboard (NOT the marketplace section)
- "Log Job" or "Add Job" button on the company's SiteMedic dashboard
- Wizard collects: client details, event type, dates/times (multi-day supported), location, staffing requirements, equipment, agreed price
- Multi-day events with per-day staffing — same flexibility as marketplace events
- Full client record created (name, contact, address) — stored as a formal record, not just free text

### Revenue Model
- Zero platform commission on self-procured jobs — company pays via SiteMedic subscription only
- Client pays through SiteMedic's Stripe checkout (deposit + remainder) — same payment pipeline as marketplace
- Company gets paid through SiteMedic payouts via Stripe Connect — same Friday payout pipeline
- The `platform_fee_percent` is set to 0 and `medic_payout_percent` to 100 for self-procured jobs
- Full reporting generated regardless (timesheets, compliance reports, weekly PDFs)

### Dashboard Distinction
- Filterable single view with source badges — "Marketplace" badge vs "Direct" badge on each job
- Filter dropdown: All / Marketplace / Direct
- Self-procured + marketplace jobs combined in the SiteMedic platform dashboard
- Marketplace dashboard (MedBid section) shows ONLY marketplace-sourced jobs — completely separate
- Self-procured jobs are a SiteMedic subscription feature — only available to companies with an active SiteMedic account
- Platform admin sees self-procured jobs in the main SiteMedic admin, NOT in the marketplace admin dashboard

### Client Access
- Clients get portal access to see their job details (status, compliance reports, payments)
- Client portal shows admin-level information only — no access to individual medic details
- If client already has a SiteMedic account → access through SiteMedic platform
- If client only has a marketplace account → access through marketplace
- If client has no account → company can invite them to create one

### Feature Parity
- Self-procured jobs create bookings with `source='direct'` — identical booking flow
- Timesheets generated identically to marketplace jobs
- Full compliance reporting: weekly PDFs, RIDDOR flagging, certification tracking
- Company assigns medics from their roster — same availability checking as marketplace
- Bidirectional ratings supported — client and company can rate each other
- Payouts via existing Friday Stripe Connect pipeline (but 0% commission = 100% to company)

### Claude's Discretion
- Exact label choice between "Self-Procured" / "Direct" / "Private" for the badge (leaning "Direct" to match existing `source='direct'` column)
- Wizard step ordering and UX flow
- How the client invitation flow works (email invite, link sharing, etc.)
- Empty state design for companies with no self-procured jobs yet

</decisions>

<specifics>
## Specific Ideas

- Self-procured jobs should feel like a natural extension of the SiteMedic platform, not a bolt-on to the marketplace
- The "Log Job" action is a key subscription value proposition — companies use SiteMedic to manage ALL their work, not just marketplace wins
- Client records for self-procured jobs are separate from marketplace client accounts — a company's private client doesn't become a marketplace user unless they choose to
- The existing `bookings.source` column ('direct' vs 'marketplace') is the foundation for this distinction

</specifics>

<deferred>
## Deferred Ideas

- None — discussion stayed within phase scope

</deferred>

---

*Phase: 34.1-self-procured-jobs*
*Context gathered: 2026-02-19*
