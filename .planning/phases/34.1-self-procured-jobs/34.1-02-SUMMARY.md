---
phase: 34.1-self-procured-jobs
plan: 02
subsystem: ui
tags: [zustand, react, wizard, direct-jobs, next.js]

# Dependency graph
requires:
  - phase: 34.1-01
    provides: "Direct jobs types, Zod schemas, and API routes (POST/GET)"
provides:
  - "Zustand store for 6-step direct job wizard (useDirectJobStore)"
  - "6 wizard step components (Client, JobInfo, Schedule, Staffing, Pricing, Review)"
  - "Wizard page at /dashboard/jobs/create with step validation and submission"
  - "Jobs list page at /dashboard/jobs with search, filters, table, pagination"
  - "Clients API endpoint at /api/direct-jobs/clients"
  - "Dashboard sidebar nav entry for Jobs"
affects: [34.1-03, 34.1-04, 34.1-05]

# Tech tracking
tech-stack:
  added: []
  patterns:
    - "Direct job wizard follows same Zustand + Zod step pattern as marketplace event wizard"
    - "Client selector with existing/new toggle pattern"

key-files:
  created:
    - web/stores/useDirectJobStore.ts
    - web/components/direct-jobs/wizard/ClientDetailsStep.tsx
    - web/components/direct-jobs/wizard/JobInfoStep.tsx
    - web/components/direct-jobs/wizard/JobScheduleStep.tsx
    - web/components/direct-jobs/wizard/JobStaffingStep.tsx
    - web/components/direct-jobs/wizard/JobPricingStep.tsx
    - web/components/direct-jobs/wizard/JobReviewStep.tsx
    - web/app/(dashboard)/dashboard/jobs/create/page.tsx
    - web/app/(dashboard)/dashboard/jobs/page.tsx
    - web/app/api/direct-jobs/clients/route.ts
  modified:
    - web/components/dashboard/DashboardNav.tsx

key-decisions:
  - "Wizard lives at /dashboard/jobs (platform section, NOT marketplace)"
  - "6-step wizard (Client, Info, Schedule, Staffing, Pricing, Review) vs marketplace 4-step"
  - "Existing client selector pre-fills all fields but disables editing"
  - "Pricing step shows 0% platform commission prominently"

patterns-established:
  - "Direct job wizard: same Zustand store + Zod step validation as marketplace event wizard"
  - "Client selector: toggle between New/Existing with auto-fill on selection"

# Metrics
duration: 16min
completed: 2026-02-20
---

# Phase 34.1 Plan 02: Job Creation Wizard Summary

**6-step Zustand wizard with client selector, Zod step validation, jobs list page, and dashboard nav entry for self-procured job creation**

## Performance

- **Duration:** 16 min
- **Started:** 2026-02-20T00:31:43Z
- **Completed:** 2026-02-20T00:47:39Z
- **Tasks:** 2
- **Files modified:** 11

## Accomplishments
- Zustand store managing 6-step wizard state with existing client auto-fill and draft persistence
- 6 wizard step components following exact marketplace event wizard patterns
- Wizard page with step indicator, Zod validation on each step advance, and dual submit (draft/confirmed)
- Jobs list page with search, status filter, paginated table, and status badges
- Clients API for populating existing client dropdown
- Dashboard sidebar navigation updated with Jobs entry (Briefcase icon)

## Task Commits

Each task was committed atomically:

1. **Task 1: Zustand store and wizard step components** - `e0b2114` (feat) - Previously committed
2. **Task 2: Wizard page, jobs list page, and clients API** - `79c6773` (feat)

## Files Created/Modified
- `web/stores/useDirectJobStore.ts` - Zustand store with 6-step state, client selector, draft loading
- `web/components/direct-jobs/wizard/ClientDetailsStep.tsx` - Step 1: client name, contact, address, existing selector
- `web/components/direct-jobs/wizard/JobInfoStep.tsx` - Step 2: job name, type, description, setting
- `web/components/direct-jobs/wizard/JobScheduleStep.tsx` - Step 3: multi-day schedule, location (no quote_deadline)
- `web/components/direct-jobs/wizard/JobStaffingStep.tsx` - Step 4: staffing roles, equipment checklist (no budget range)
- `web/components/direct-jobs/wizard/JobPricingStep.tsx` - Step 5: agreed price, deposit %, payment breakdown
- `web/components/direct-jobs/wizard/JobReviewStep.tsx` - Step 6: read-only summary with edit links
- `web/app/(dashboard)/dashboard/jobs/create/page.tsx` - Wizard page with step navigation and submission
- `web/app/(dashboard)/dashboard/jobs/page.tsx` - Jobs list with search, filters, table, pagination
- `web/app/api/direct-jobs/clients/route.ts` - GET endpoint for existing client dropdown
- `web/components/dashboard/DashboardNav.tsx` - Added Jobs nav item with Briefcase icon

## Decisions Made
- Wizard lives at /dashboard/jobs/create (SiteMedic platform dashboard, NOT marketplace section)
- 6-step wizard (extra Client Details + Pricing steps vs marketplace 4-step) because direct jobs collect client records and agreed pricing
- Existing client selector pre-fills all contact/address fields but disables editing (prevents accidental modification of shared client record)
- Pricing step prominently displays 0% platform commission and payment breakdown (deposit/remainder)
- Client-side search filtering on jobs list (server fetches full page, JS filters by name/client/postcode)

## Deviations from Plan

None - plan executed exactly as written.

Note: Task 1 files (store + wizard components) were found already committed in a prior session (commit e0b2114). Content was identical to this plan's specification, so no re-commit was needed.

## Issues Encountered
- Task 1 files were already committed in a previous session (bundled into an unrelated commit e0b2114). Since the content matched exactly, no additional commit was required for Task 1.

## User Setup Required
None - no external service configuration required.

## Next Phase Readiness
- Wizard creation flow complete and ready for end-to-end testing
- Jobs list page ready for combined dashboard integration (Plan 03)
- Client records being created for future client management features
- No blockers for subsequent plans

---
*Phase: 34.1-self-procured-jobs*
*Completed: 2026-02-20*
