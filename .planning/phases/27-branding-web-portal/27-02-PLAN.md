# Plan 27-02: Dashboard Layout Rebrand

```yaml
phase: 27
plan: "02"
title: "Dashboard Layout Rebrand"
wave: 2
depends_on: ["27-01"]
files_modified:
  - web/app/(dashboard)/layout.tsx
autonomous: true
```

## Objective

Update the dashboard layout's sidebar header to show the org's company name, tagline, and logo instead of hardcoded "SiteMedic" / "Dashboard". The dashboard layout is a server component — read `x-org-*` headers directly via `next/headers`.

## Tasks

<task id="1" name="dashboard-sidebar-header-rebrand">

### Update dashboard sidebar header with org branding

In `web/app/(dashboard)/layout.tsx`:

**Add import:**
```typescript
import { headers } from 'next/headers';
```

**Read branding headers at the top of the function (after auth check):**
```typescript
const headersList = await headers();
const companyName = headersList.get('x-org-company-name') || 'SiteMedic';
const logoUrl = headersList.get('x-org-logo-url') || '';
const tagline = headersList.get('x-org-tagline') || 'Dashboard';
```

**Replace the SidebarHeader content:**

Current:
```tsx
<SidebarHeader>
  <div className="px-4 py-3">
    <h2 className="text-lg font-semibold">SiteMedic</h2>
    <p className="text-sm text-muted-foreground">Dashboard</p>
  </div>
</SidebarHeader>
```

New:
```tsx
<SidebarHeader>
  <div className="px-4 py-3">
    <div className="flex items-center gap-3">
      {logoUrl ? (
        /* eslint-disable-next-line @next/next/no-img-element */
        <img
          src={logoUrl}
          alt={companyName}
          className="max-h-10 w-auto object-contain"
        />
      ) : (
        <div className="w-10 h-10 bg-[color:var(--org-primary)] rounded-xl flex items-center justify-center">
          <span className="text-white font-bold text-lg">
            {companyName.slice(0, 2).toUpperCase()}
          </span>
        </div>
      )}
      <div>
        <h2 className="text-lg font-semibold">{companyName}</h2>
        <p className="text-sm text-muted-foreground">{tagline || 'Dashboard'}</p>
      </div>
    </div>
  </div>
</SidebarHeader>
```

**Rules:**
- Only render `<img>` when `logoUrl` is truthy — no broken image placeholders
- Logo constrained to `max-h-10 w-auto object-contain` (40px height, natural width)
- Fallback: 2-character initials in org-primary coloured square
- Tagline fallback: "Dashboard" when no tagline set
- Company name fallback: "SiteMedic" when no header present (apex domain)

</task>

## Verification

```yaml
must_haves:
  - "Dashboard sidebar header shows org company name instead of hardcoded 'SiteMedic'"
  - "Dashboard sidebar shows org logo when x-org-logo-url header is present"
  - "Dashboard sidebar shows initials fallback when no logo URL"
  - "Dashboard sidebar shows org tagline or 'Dashboard' fallback"
  - "No <img> element rendered when logoUrl is empty (no broken image)"
  - "TypeScript compiles without errors (npx tsc --noEmit)"
```
