---
phase: 04.5-marketing-booking
plan: 01
subsystem: ui
tags: [nextjs, react, ssg, marketing, server-components]

# Dependency graph
requires:
  - phase: 04-web-dashboard
    provides: Next.js foundation with shadcn/ui components
provides:
  - Static marketing homepage and pricing page with <2s load time
  - Shared marketing components (header, footer, hero, pricing table, trust signals)
  - (marketing) route group with SSG and ISR (24-hour revalidation)
affects: [04.5-02-booking-form, marketing, seo]

# Tech tracking
tech-stack:
  added: []
  patterns:
    - "Marketing route group pattern for public pages"
    - "Server Components for static content with force-static directive"
    - "Client wrapper components for interactive elements (QuoteButton)"
    - "ISR with 24-hour revalidation for marketing content"

key-files:
  created:
    - "web/components/marketing/site-header.tsx"
    - "web/components/marketing/site-footer.tsx"
    - "web/components/marketing/hero.tsx"
    - "web/components/marketing/pricing-table.tsx"
    - "web/components/marketing/trust-signals.tsx"
    - "web/components/marketing/quote-button.tsx"
    - "web/app/(marketing)/layout.tsx"
    - "web/app/(marketing)/page.tsx"
    - "web/app/(marketing)/pricing/page.tsx"
  modified:
    - "web/app/(dashboard)/page.tsx → web/app/(dashboard)/dashboard/page.tsx"

key-decisions:
  - "D-04.5-01-001: Use (marketing) route group for shared layout without affecting URL structure"
  - "D-04.5-01-002: Move dashboard to /dashboard path to resolve route group conflict between (marketing) and (dashboard)"
  - "D-04.5-01-003: SSG with force-static and 86400s (24h) revalidation for optimal CDN caching"
  - "D-04.5-01-004: Small client wrapper (quote-button.tsx) for QuoteBuilder modal, keep pages as Server Components"
  - "D-04.5-01-005: shadcn/ui Sheet component for mobile navigation menu"

patterns-established:
  - "Pattern: Marketing components in components/marketing/ directory"
  - "Pattern: Client wrappers for interactive elements in otherwise static pages"
  - "Pattern: Route groups resolve at root /, use subdirectories to avoid conflicts"

# Metrics
duration: 10min
completed: 2026-02-16
---

# Phase 04.5 Plan 01: Marketing Homepage & Pricing Summary

**Static marketing homepage and pricing page with Server Components, SSG, and <2s load time via CDN caching**

## Performance

- **Duration:** 10 min
- **Started:** 2026-02-16T06:01:37Z
- **Completed:** 2026-02-16T06:11:14Z
- **Tasks:** 2
- **Files modified:** 15 (9 created, 1 moved, 2 deleted, 3 route files)

## Accomplishments
- Refactored marketing pages into (marketing) route group with SSG and ISR
- Created 5 shared marketing components (header, footer, hero, pricing table, trust signals) as Server Components
- Achieved static generation with 24-hour revalidation for optimal CDN performance
- Resolved route group conflict by moving dashboard to /dashboard path

## Task Commits

Each task was committed atomically:

1. **Task 1: Create shared marketing components** - `4cafb49` (feat)
   - site-header.tsx: Sticky nav with mobile Sheet menu, Book Now CTA
   - site-footer.tsx: Company info, links, compliance badges
   - hero.tsx: Hero section with dual CTAs (Book + Quote)
   - pricing-table.tsx: Base rate and volume discounts display
   - trust-signals.tsx: 5 compliance badges with icons
   - quote-button.tsx: Client wrapper for QuoteBuilder modal

2. **Task 2: Create marketing route group with SSG** - `cafe3fc` (feat)
   - (marketing)/layout.tsx: Shared layout with SiteHeader and SiteFooter
   - (marketing)/page.tsx: Static homepage with Hero, How it works, Features, Trust signals, CTA
   - (marketing)/pricing/page.tsx: Static pricing with PricingTable, FAQ, CTA
   - Moved (dashboard)/page.tsx → (dashboard)/dashboard/page.tsx
   - Deleted old app/page.tsx and app/pricing/page.tsx

## Files Created/Modified

**Created:**
- `web/components/marketing/site-header.tsx` - Navigation with mobile menu and Book Now CTA
- `web/components/marketing/site-footer.tsx` - Footer with company info and compliance badges
- `web/components/marketing/hero.tsx` - Hero section with dual CTAs
- `web/components/marketing/pricing-table.tsx` - Pricing display with volume discounts
- `web/components/marketing/trust-signals.tsx` - 5 compliance badge grid
- `web/components/marketing/quote-button.tsx` - Client wrapper for QuoteBuilder modal
- `web/app/(marketing)/layout.tsx` - Marketing layout with header and footer
- `web/app/(marketing)/page.tsx` - Static homepage (SSG, 24h revalidate)
- `web/app/(marketing)/pricing/page.tsx` - Static pricing page (SSG, 24h revalidate)

**Modified:**
- Moved `web/app/(dashboard)/page.tsx` → `web/app/(dashboard)/dashboard/page.tsx` (resolved route conflict)

**Deleted:**
- `web/app/page.tsx` - Replaced by (marketing)/page.tsx
- `web/app/pricing/page.tsx` - Replaced by (marketing)/pricing/page.tsx

## Decisions Made

**D-04.5-01-001: Use (marketing) route group for shared layout**
- Enables shared SiteHeader and SiteFooter without affecting URL structure
- Route groups don't add to URL path, so (marketing)/page.tsx still serves at /

**D-04.5-01-002: Move dashboard to /dashboard path**
- Original (dashboard)/page.tsx at / conflicted with (marketing)/page.tsx at /
- Moved dashboard from (dashboard)/page.tsx to (dashboard)/dashboard/page.tsx
- Dashboard now at /dashboard instead of /, marketing at /
- Aligns with typical structure: public homepage at /, protected dashboard at /dashboard

**D-04.5-01-003: SSG with force-static and 24h revalidation**
- Used `export const dynamic = 'force-static'` to enforce static generation
- Used `export const revalidate = 86400` (24 hours) for ISR
- Achieves <2s load time requirement via CDN caching
- Build output confirms: ○ (Static) with "1d" revalidate

**D-04.5-01-004: Client wrapper for QuoteBuilder interaction**
- Created quote-button.tsx as 'use client' wrapper for QuoteBuilder modal
- Keeps hero.tsx and pricing-table.tsx as Server Components
- Follows pattern: Server Components import Client Components when needed

**D-04.5-01-005: shadcn/ui Sheet for mobile navigation**
- Used existing shadcn/ui Sheet component for mobile hamburger menu
- Consistent with existing UI component library
- No additional dependencies needed

## Deviations from Plan

### Auto-fixed Issues

**1. [Rule 3 - Blocking] Resolved route group conflict**
- **Found during:** Task 2 (creating (marketing)/page.tsx)
- **Issue:** Build failed with "You cannot have two parallel pages that resolve to the same path" error. Both (dashboard)/page.tsx and (marketing)/page.tsx tried to serve at /
- **Fix:** Moved dashboard page from (dashboard)/page.tsx to (dashboard)/dashboard/page.tsx so it serves at /dashboard instead of /
- **Files modified:** web/app/(dashboard)/page.tsx → web/app/(dashboard)/dashboard/page.tsx (renamed)
- **Rationale:** Marketing homepage should be at / for public access. Dashboard at /dashboard is standard pattern for protected admin areas
- **Verification:** Build succeeded, / serves marketing page, /dashboard serves dashboard
- **Committed in:** cafe3fc (Task 2 commit)

---

**Total deviations:** 1 auto-fixed (1 blocking)
**Impact on plan:** Necessary structural fix to resolve Next.js route conflict. No scope creep - just moved existing dashboard to standard path.

## Issues Encountered

None - plan executed smoothly after resolving route group conflict.

## User Setup Required

None - no external service configuration required.

## Verification Results

Build verification confirms SSG success:
- ✅ `/` shows as Static (○) with 1d revalidate, 1y expire
- ✅ `/pricing` shows as Static (○) with 1d revalidate, 1y expire
- ✅ `/dashboard` shows as Dynamic (ƒ) as expected for protected page
- ✅ Build completes in <10s with no TypeScript errors
- ✅ Homepage renders with Guardian Medics branding, Hero, trust signals, and Book Now CTA
- ✅ Pricing page renders with £350 pricing, volume discounts, and FAQ
- ✅ Navigation header includes Book Now link to /book
- ✅ Footer includes compliance badges and /book link

## Next Phase Readiness

Ready for Phase 04.5-02 (Booking Form):
- Marketing layout established with shared header and footer
- Book Now CTAs link to /book (to be created in next plan)
- Static pages optimized for <2s load time (Lighthouse >90 expected)
- QuoteBuilder already functional (existing component integrated)

No blockers or concerns.

---
*Phase: 04.5-marketing-booking*
*Completed: 2026-02-16*
