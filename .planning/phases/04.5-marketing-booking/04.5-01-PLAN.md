---
phase: 04.5-marketing-booking
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - web/app/(marketing)/layout.tsx
  - web/app/(marketing)/page.tsx
  - web/app/(marketing)/pricing/page.tsx
  - web/components/marketing/hero.tsx
  - web/components/marketing/pricing-table.tsx
  - web/components/marketing/trust-signals.tsx
  - web/components/marketing/site-header.tsx
  - web/components/marketing/site-footer.tsx
autonomous: true

must_haves:
  truths:
    - "Marketing homepage loads in <2 seconds (Lighthouse performance >90)"
    - "Pricing page displays base rate, volume discounts, and VAT breakdown"
    - "Trust signals (HCPC, RIDDOR, CDM, GDPR badges) are visible on homepage"
    - "Navigation includes Book Now CTA linking to /book"
    - "Pages are statically generated (SSG) at build time"
  artifacts:
    - path: "web/app/(marketing)/layout.tsx"
      provides: "Marketing route group layout with shared nav and footer"
      contains: "SiteHeader"
    - path: "web/app/(marketing)/page.tsx"
      provides: "Static homepage with hero, pricing preview, trust signals"
      contains: "force-static"
    - path: "web/app/(marketing)/pricing/page.tsx"
      provides: "Static pricing page with rate breakdown and FAQ"
      contains: "force-static"
    - path: "web/components/marketing/site-header.tsx"
      provides: "Shared navigation header with Book Now CTA"
      contains: "Book Now"
    - path: "web/components/marketing/site-footer.tsx"
      provides: "Shared footer with company info and compliance badges"
      contains: "Guardian Medics"
  key_links:
    - from: "web/app/(marketing)/page.tsx"
      to: "web/components/marketing/hero.tsx"
      via: "Server Component import"
      pattern: "import.*Hero"
    - from: "web/app/(marketing)/layout.tsx"
      to: "web/components/marketing/site-header.tsx"
      via: "Layout wrapping all marketing pages"
      pattern: "import.*SiteHeader"
---

<objective>
Refactor existing marketing pages (homepage, pricing) into a Next.js (marketing) route group with static generation (SSG) and extract shared components for the site header, footer, hero, pricing table, and trust signals.

Purpose: Marketing pages must load in <2 seconds for Lighthouse >90 score. Moving from 'use client' to Server Components with `force-static` enables CDN-cached SSG delivery. Shared nav/footer components will be reused across both marketing and booking layouts.

Output: Static marketing homepage and pricing page in (marketing) route group with extracted reusable components.
</objective>

<execution_context>
@/Users/sabineresoagli/.claude/get-shit-done/workflows/execute-plan.md
@/Users/sabineresoagli/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/04.5-marketing-booking/04.5-RESEARCH.md

Key existing files to reference:
@web/app/page.tsx (current homepage - 'use client', needs refactor to SSG)
@web/app/pricing/page.tsx (current pricing - 'use client', needs refactor to SSG)
@web/app/layout.tsx (root layout)
@web/components/QuoteBuilder.tsx (existing quote builder modal)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create shared marketing components (header, footer, hero, pricing table, trust signals)</name>
  <files>
    web/components/marketing/site-header.tsx
    web/components/marketing/site-footer.tsx
    web/components/marketing/hero.tsx
    web/components/marketing/pricing-table.tsx
    web/components/marketing/trust-signals.tsx
  </files>
  <action>
    Extract and create 5 shared marketing components from the existing homepage and pricing page:

    1. **site-header.tsx** - Server Component (no 'use client'). Sticky nav with Guardian Medics logo (Link to /), navigation links (Home, Pricing), and a prominent "Book Now" CTA button (Link to /book, blue-600 background). Mobile hamburger menu using shadcn/ui Sheet component for responsive nav. Keep the same styling as existing nav but add /book link.

    2. **site-footer.tsx** - Server Component. Extract the existing footer from homepage. Add /book link to the Links section. Keep Guardian Medics Ltd company info, compliance badges (UK GDPR, RIDDOR 2013, CDM 2015, HSE Audit-Ready), and privacy/terms links.

    3. **hero.tsx** - Server Component. Extract hero section from existing homepage. Change the "Get Your Quote" button to two CTAs: primary "Book a Medic" (Link to /book, blue-600) and secondary "Get Quote" (triggers QuoteBuilder, needs to be wrapped in a client component). Include the HCPC/RIDDOR/CDM trust badges below CTAs. Keep the existing responsive text sizing (text-4xl sm:text-5xl lg:text-6xl).

    4. **pricing-table.tsx** - Server Component. Extract the main pricing card and volume discounts from the pricing page. Display: base rate GBP 350/day, volume discounts (1 week GBP 1,750, 1 month GBP 6,800 at 3% off, Enterprise custom). Include the included features list (digital treatment logging, RIDDOR auto-flagging, weekly safety reports, works offline).

    5. **trust-signals.tsx** - Server Component. Create a standalone trust signals section showing: HCPC-Registered badge, RIDDOR 2013 compliance badge, CDM 2015 compliance badge, UK GDPR compliance badge, "HSE Audit-Ready" badge. Use a grid layout (2 cols mobile, 4-5 cols desktop) with icons from lucide-react (Shield, FileCheck, HardHat, Lock, ClipboardCheck).

    IMPORTANT: Do NOT use 'use client' on any of these components. They are all Server Components for SSG. The QuoteBuilder interaction will be handled by a small client wrapper component in the hero.
  </action>
  <verify>
    All 5 files exist in web/components/marketing/. No file contains 'use client' directive (except a small client wrapper for QuoteBuilder if needed). Each component exports a default function. Run `pnpm build` to check for TypeScript errors.
  </verify>
  <done>
    5 marketing components created as Server Components with consistent styling matching existing site design. SiteHeader includes /book navigation link. SiteFooter includes company info and compliance badges. All components TypeScript-clean.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create (marketing) route group with SSG homepage and pricing page</name>
  <files>
    web/app/(marketing)/layout.tsx
    web/app/(marketing)/page.tsx
    web/app/(marketing)/pricing/page.tsx
  </files>
  <action>
    Create the (marketing) route group with static generation:

    1. **Move existing pages into route group.** Delete web/app/page.tsx and web/app/pricing/page.tsx (they will be replaced by the route group versions). Note: Keep existing legal pages (privacy-policy, terms-and-conditions, etc.) at their current paths - do NOT move them into the route group.

    2. **web/app/(marketing)/layout.tsx** - Create layout that wraps all marketing pages with SiteHeader and SiteFooter. Import from @/components/marketing/site-header and @/components/marketing/site-footer. Structure: SiteHeader at top, {children} in main with `id="main-content"` (for skip-to-content accessibility), SiteFooter at bottom. This is a Server Component (no 'use client').

    3. **web/app/(marketing)/page.tsx** - Static homepage. Add `export const dynamic = 'force-static'` and `export const revalidate = 86400` (revalidate daily via ISR). Remove the old 'use client' directive. Compose from: Hero component, "How it works" section (keep existing 3-step content), features grid (keep existing 3 cards), TrustSignals component, CTA section with "Book a Medic" Link to /book. Remove the duplicated nav and footer (now in layout).

    4. **web/app/(marketing)/pricing/page.tsx** - Static pricing page. Add `export const dynamic = 'force-static'` and `export const revalidate = 86400`. Remove the old 'use client' directive. Compose from: PricingTable component, FAQ section (keep existing 4 questions), CTA section. Export metadata for SEO: title "Pricing - Guardian Medics", description about transparent pricing.

    CRITICAL: The root layout (web/app/layout.tsx) must NOT be modified. The (marketing) route group is a nested layout that doesn't affect the URL structure (/ stays /, /pricing stays /pricing).

    For QuoteBuilder interactivity: Create a small 'use client' wrapper component (e.g., web/components/marketing/quote-button.tsx) that wraps the button + QuoteBuilder modal state. Import this client component into the Server Component pages where needed.
  </action>
  <verify>
    Run `pnpm build` from web/ directory. Verify build output shows (marketing)/page.tsx and (marketing)/pricing/page.tsx as static pages (look for "S" or "SSG" indicator in build output). Navigate to http://localhost:30500/ and http://localhost:30500/pricing to confirm pages render correctly with header and footer.
  </verify>
  <done>
    Marketing route group created with SSG. Homepage at / renders Hero + How it works + Features + Trust signals + CTA. Pricing at /pricing renders PricingTable + FAQ + CTA. Both pages are statically generated at build time. Navigation includes "Book Now" link to /book. Build succeeds without errors.
  </done>
</task>

</tasks>

<verification>
1. `pnpm build` succeeds in web/ directory without errors
2. Build output shows marketing pages as statically generated (SSG)
3. Homepage loads with hero, trust signals, how-it-works, features sections
4. Pricing page loads with rate breakdown, volume discounts, FAQ
5. Navigation header shows on both pages with "Book Now" link to /book
6. Footer shows on both pages with company info and compliance badges
7. No 'use client' on page-level components (only on QuoteBuilder wrapper)
</verification>

<success_criteria>
- Marketing homepage and pricing page render correctly at / and /pricing
- Both pages are statically generated (SSG) with daily ISR revalidation
- Shared SiteHeader with "Book Now" CTA linking to /book
- Shared SiteFooter with compliance badges
- `pnpm build` succeeds with static page indicators
- Existing legal pages (privacy, terms, etc.) still accessible at their URLs
</success_criteria>

<output>
After completion, create `.planning/phases/04.5-marketing-booking/04.5-01-SUMMARY.md`
</output>
