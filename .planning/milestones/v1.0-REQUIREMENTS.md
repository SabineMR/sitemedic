# Requirements Archive: v1.0 MVP

**Archived:** 2026-02-17
**Status:** âœ… SHIPPED

This is the archived requirements specification for v1.0 MVP.
For current requirements, see `.planning/REQUIREMENTS.md` (created for next milestone).

---

# Requirements: SiteMedic

**Defined:** 2026-02-15
**Core Value:** Documentation happens automatically as the medic does their job, not as separate admin work.

## v1 Requirements

Requirements for MVP launch. All shipped in v1.0.

### Foundation & Architecture

- [x] **ARCH-01**: Backend API with UK-hosted Supabase (eu-west-2 London region) for GDPR compliance
- [x] **ARCH-02**: PostgreSQL database with Row-Level Security for multi-tenant isolation
- [x] **ARCH-03**: Encrypted local SQLite database (WatermelonDB + SQLCipher, AES-256)
- [x] **ARCH-04**: Offline-first sync queue with conflict resolution and exponential backoff
- [x] **ARCH-05**: Background sync with WorkManager constraints (WiFi-only for photos, battery-friendly)
- [x] **ARCH-06**: Multi-modal sync status indicators (color, labels, persistent badge showing pending items)
- [x] **ARCH-07**: Network connectivity detection and offline mode handling

### Authentication & Security

- [x] **AUTH-01**: User can sign up and log in with email and password
- [x] **AUTH-02**: User session persists across app restarts (offline session handling)
- [x] **AUTH-03**: Biometric authentication (Face ID / Touch ID) for quick access
- [x] **AUTH-04**: Encryption key management via iOS Keychain (never in AsyncStorage)
- [x] **AUTH-05**: Role-based access control (medic vs site manager vs admin)

### GDPR & Compliance

- [x] **GDPR-01**: Health data encrypted at rest (AES-256) and in transit (TLS 1.3)
- [x] **GDPR-02**: Audit logging for all health data access (who viewed which worker record)
- [x] **GDPR-03**: Worker consent flow during induction (digital signature for data processing)
- [x] **GDPR-04**: Data retention policy implementation (3-year minimum for RIDDOR)
- [x] **GDPR-05**: Right to erasure workflow (worker can request data deletion)
- [x] **GDPR-06**: UK/EEA data residency enforced (no data leaving region)

### Treatment Logger (Mobile App)

- [x] **TREAT-01**: Medic can select worker from site roster or quick-add new worker
- [x] **TREAT-02**: Medic can log injury/illness category from pick list (Section 8.1 taxonomy)
- [x] **TREAT-03**: Medic can select body part affected via tap on body diagram or pick list
- [x] **TREAT-04**: Medic can describe mechanism of injury (free text + common presets)
- [x] **TREAT-05**: Medic can record treatment given (pick list + free text)
- [x] **TREAT-06**: Medic can attach up to 4 photos with on-device compression (resize to 1200px, compress to 100-200KB)
- [x] **TREAT-07**: Medic can record outcome (Returned to work / Light duties / Referred to GP / A&E / Sent home)
- [x] **TREAT-08**: Medic can capture worker's digital signature confirming treatment received
- [x] **TREAT-09**: Each treatment log gets unique reference number (format: SITE-YYYYMMDD-001)
- [x] **TREAT-10**: Treatment logger auto-saves locally every 10 seconds (offline resilience)
- [x] **TREAT-11**: Quick log mode for minor treatments (<30 second completion: Worker + Category + Treatment + Outcome)
- [x] **TREAT-12**: Full log mode for significant treatments with complete detail capture

### Near-Miss Capture (Mobile App)

- [x] **NEAR-01**: Medic can report near-miss in <45 seconds (category + photo + description + severity)
- [x] **NEAR-02**: Medic can select near-miss category from pick list (Fall from height / Struck by object / Slip-trip / Electrical / etc.)
- [x] **NEAR-03**: Medic can capture up to 4 photos of near-miss scene
- [x] **NEAR-04**: Medic can describe near-miss via free text or voice-to-text
- [x] **NEAR-05**: Medic can select severity potential (What COULD have happened: Minor / Major / Fatal)
- [x] **NEAR-06**: Near-miss accessible from home screen in ONE tap (big visible button)
- [x] **NEAR-07**: GPS coordinates auto-attached to near-miss report

### Daily Safety Snapshot (Mobile App)

- [x] **DAILY-01**: Medic completes 10-item safety checklist each morning (3-5 minute target)
- [x] **DAILY-02**: Each checklist item has Green/Amber/Red status + optional photo + note
- [x] **DAILY-03**: Checklist items cover: First aid kit, AED, eyewash, welfare facilities, site access, PPE, housekeeping, weather, hazards, emergency vehicle access
- [x] **DAILY-04**: App prompts medic to complete checklist when opening app on workday morning
- [x] **DAILY-05**: Incomplete checklists flag on dashboard for site manager visibility

### Worker Health Profiles (Mobile App)

- [x] **WORK-01**: Medic can add worker during site induction with health screening data
- [x] **WORK-02**: Worker profile includes: name, company, role, emergency contact, allergies, medications, pre-existing conditions, blood type, CSCS card number + expiry
- [x] **WORK-03**: Medic can view worker's treatment history on this project
- [x] **WORK-04**: Medic can pull up any worker's profile in 2 taps during emergency
- [x] **WORK-05**: Worker profile shows certification expiry dates with visual status (green/amber/red)
- [x] **WORK-06**: Worker data is GDPR-compliant (encrypted, access-controlled, retention policy enforced)

### RIDDOR Reporting

- [x] **RIDD-01**: App auto-flags treatment when it matches RIDDOR-reportable criteria (Section 8.2)
- [x] **RIDD-02**: Medic can confirm or override RIDDOR flag with reason
- [x] **RIDD-03**: RIDDOR-flagged incident shows deadline countdown (10 days for specified injuries, 15 days for over-7-day)
- [x] **RIDD-04**: App generates pre-filled HSE F2508 form PDF from treatment log data
- [x] **RIDD-05**: Dashboard shows RIDDOR deadline countdown for site manager
- [x] **RIDD-06**: RIDDOR report tracks status: Draft / Submitted / Confirmed

### Photo Handling

- [x] **PHOTO-01**: Photos captured with EXIF metadata preservation
- [x] **PHOTO-02**: Photos compressed on-device before upload (resize to 1200px, compress to 100-200KB JPEG)
- [x] **PHOTO-03**: Photo upload happens in background (doesn't block medic workflow)
- [x] **PHOTO-04**: Progressive upload: low-quality preview syncs first, full-quality later
- [x] **PHOTO-05**: Photo upload uses WiFi-only constraint to avoid mobile data costs
- [x] **PHOTO-06**: Original photos retained on device for 30 days before cleanup

### Web Dashboard (Site Manager)

- [x] **DASH-01**: Site manager sees overview screen with traffic-light compliance score
- [x] **DASH-02**: Compliance score based on: daily check completed today, overdue follow-ups, expired certifications, RIDDOR deadlines
- [x] **DASH-03**: Dashboard shows summary stats for current week (treatments, near-misses, toolbox talks, workers on site)
- [x] **DASH-04**: Site manager can view and filter treatment log (by date range, severity, injury type, worker, outcome)
- [x] **DASH-05**: Site manager can click into any treatment for full detail view including photos
- [x] **DASH-06**: Site manager can view near-miss log (list view with category, severity, date)
- [x] **DASH-07**: Site manager can view worker registry with certification status indicators
- [x] **DASH-08**: Site manager can search and filter workers (by company, role, certification status)
- [x] **DASH-09**: Dashboard updates via polling (60-second intervals) for near-real-time data
- [x] **DASH-10**: Dashboard is responsive (desktop-focused, mobile-friendly for tablets)

### PDF Report Generation

- [x] **PDF-01**: Weekly safety report auto-generated every Friday with professional formatting
- [x] **PDF-02**: PDF includes: project name, week ending date, medic name, compliance score, treatment summary, near-miss summary, certification status, RIDDOR status, open actions
- [x] **PDF-03**: PDF generation completes in <10 seconds (server-side via Supabase Edge Functions)
- [x] **PDF-04**: PDF includes company branding (logo, colors)
- [x] **PDF-05**: Site manager can download PDF or receive via email
- [x] **PDF-06**: PDF stored in Supabase Storage with signed URL for secure access
- [x] **PDF-07**: PDF is audit-ready for HSE inspectors, principal contractors, insurers

### Certification Tracking & Alerts

- [x] **CERT-01**: System tracks UK certifications (CSCS, CPCS, IPAF, PASMA, Gas Safe, etc.) with expiry dates
- [x] **CERT-02**: Dashboard shows list of certifications expiring in next 30/60/90 days
- [x] **CERT-03**: Workers on site with expired certifications show critical alert (red)
- [x] **CERT-04**: Email notification to site manager when certification expires
- [x] **CERT-05**: Progressive reminders before expiry (30, 14, 7, 1 days before)
- [x] **CERT-06**: Expired certification prevents worker from logging incidents (validation at point of use)

### Email Notifications

- [x] **NOTIF-01**: Site manager receives email when weekly PDF report is ready
- [x] **NOTIF-02**: Site manager receives email when RIDDOR deadline approaches (3 days before)
- [x] **NOTIF-03**: Site manager receives email when worker certification expires
- [x] **NOTIF-04**: Email notifications use professional template with company branding

### Mobile UX & Performance

- [x] **UX-01**: Gloves-on usability (48x48pt minimum tap targets, ideally 56x56 for primary actions)
- [x] **UX-02**: Bright-light readability (high contrast, no light grey text)
- [x] **UX-03**: One-hand operation for core workflows (treatment log, near-miss capture)
- [x] **UX-04**: No training required (familiar patterns, obvious labelling)
- [x] **UX-05**: Treatment logging completes in <90 seconds for full log, <30 seconds for quick log
- [x] **UX-06**: Near-miss capture completes in <45 seconds
- [x] **UX-07**: Daily safety check completes in <5 minutes
- [x] **UX-08**: App launches instantly regardless of offline data volume (lazy loading)

### Data Export

- [x] **EXPORT-01**: Site manager can export treatment log as CSV
- [x] **EXPORT-02**: Site manager can export treatment log as PDF
- [x] **EXPORT-03**: Site manager can export worker registry as CSV

---

## Milestone Summary

**v1.0 Shipped:** 80/98 requirements completed (18 foundation requirements functionally complete but checkboxes not updated before archival)

**Requirements Added During Implementation:**
- Business operations requirements (booking portal, payments, territories) emerged during Phase 1.5, 4.5, 5.5, 6.5, 7.5 planning
- These requirements were validated through implementation and are now part of shipped v1.0

**Requirements Adjusted:**
- None - all requirements implemented as originally specified

**Requirements Dropped:**
- None - all v1 requirements shipped

**Known Tech Debt:**
- Booking confirmation page uses mock data instead of fetching real booking (medium severity - confirmation emails work correctly)
- Foundation requirements (ARCH-01 through ARCH-07, AUTH-01 through AUTH-05, GDPR-01 through GDPR-06) functionally complete and verified but checkboxes not marked in original REQUIREMENTS.md

**Production Readiness:**
- 98% ready (46/47 cross-phase connections working, 4/5 E2E flows complete)
- All core features operational and verified via phase verification reports
- See v1.0-MILESTONE-AUDIT.md for comprehensive integration analysis

---

_Archived: 2026-02-17 as part of v1.0 milestone completion_
